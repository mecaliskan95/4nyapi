const translations = {
    tr: {
        "hero-title": "DÖRT DÖRTLÜK KALİTE<br>DÖRT DÖRTLÜK GÜVEN",
        "hero-intro": "4N Yapı olarak, konut, ticari ve sanayi yapılarında kaliteyi, mühendisliği ve estetiği bir araya getiriyoruz. Ankara merkezli firmamızla, güvenli ve modern yaşam alanları inşa ediyor, geleceğe sağlam adımlar atıyoruz.",
        "nav-kurumsal": "Kurumsal",
        "nav-projeler": "Projelerimiz",
        "nav-iletisim": "İletişim",
        "mobile-menu-toggle": "Menüyü aç/kapat",
        "section-kurumsal": "Kurumsal",
        "section-projeler": "Projelerimiz",
        "section-iletisim": "İletişim",
        "about-text": "4N Yapı (Dörten Yapı Sanayi Turizm Ticaret Ltd. Şti.), inşaat sektöründe güvenilirliği, kaliteyi ve mühendislik gücünü temel alan bir anlayışla faaliyet göstermektedir. Ankara merkezli şirketimiz; konut, ticari alanlar, sanayi tesisleri ve çelik/betonarme yapılar başta olmak üzere birçok alanda projelendirme ve uygulama hizmeti sunmaktadır. Alanında deneyimli teknik ekibimiz ve çözüm odaklı yaklaşımımızla, projelerin her aşamasında maksimum verimlilik ve memnuniyet hedeflenmektedir.",
        "vision-title": "Vizyonumuz",
        "vision-text": "Hedefimiz, daima iyi işlere imza atarak alanımızda ilk akla gelen isimlerden biri olmak, sektördeki kalitenin sürekli yükselmesini sağlamaktır. Ayrıca sürekli büyüme ile sağlayacağımız istihdam, ülke ekonomisine katkıda bulunacaktır.",
        "mission-title": "Misyonumuz",
        "mission-text": "Güvenilirliğimiz, kalite anlayışımız ve profesyonel yaklaşımımızla sektörde örnek olmak, her projeye aynı özeni yansıtmak asli görevimizdir. Amacımız modern teknolojiyle, uzman ve eğitimli kadrolara yatırım yaparak başarıyı her zaman en üst seviyede tutabilmektir.",
        "projects-intro": "4N Yapı, kuruluşundan bu yana birçok başarılı projeye imza atmıştır. Konut, iş merkezi ve endüstriyel yapı kategorilerinde uzmanlaşmış ekibimizle; işlevsel, estetik ve yönetmeliklere tam uyumlu yapılar tasarlayıp hayata geçiriyoruz. Referans projelerimiz, mühendislik hassasiyeti ve kullanıcı memnuniyetini bir arada sunan çözümlerimizle şekilleniyor.",
        "featured-projects": "Öne Çıkan Projelerimiz",
        "all-projects": "Tüm Projelerimiz",
        "residential-projects": "Konut Projeleri",
        "commercial-projects": "Ticari Projeler",
        "industrial-projects": "Sanayi Projeleri",
        "public-projects": "Kamu Projeleri",
        "tourism-projects": "Turizm Projeleri",
        "contact-intro": "4N Yapı ile projelerinizi güvenle hayata geçirmek için bizimle iletişime geçin. Ofisimiz Ankara'nın Çankaya ilçesinde yer almakta olup, telefon veya e-posta aracılığıyla bize kolayca ulaşabilirsiniz. Dilerseniz aşağıdaki form üzerinden de bize mesaj gönderebilirsiniz – en kısa sürede dönüş sağlanacaktır.",
        "contact-address": "Adres",
        "contact-phone": "Telefon",
        "contact-email": "E-posta",
        "form-name": "Adınız",
        "form-email": "E-posta Adresiniz",
        "form-phone": "Telefon Numaranız",
        "form-message": "Mesajınız",
        "form-submit": "Gönder",
        "form-name-placeholder": "Adınız *",
        "form-email-placeholder": "E-posta Adresiniz *",
        "form-phone-placeholder": "Telefon Numaranız",
        "form-message-placeholder": "Mesajınız *",
        "contact-form-title": "İletişim Formu",
        "map-title": "Ofis Konumumuz",
        "form-sending": "Gönderiliyor...",
        "form-success": "Mesajınız başarıyla gönderildi! En kısa sürede size dönüş yapacağız.",
        "form-error": "Mesaj gönderilirken bir hata oluştu. Lütfen tekrar deneyin.",
        "form-required": "Bu alan zorunludur",
        "form-email-invalid": "Geçerli bir e-posta adresi giriniz",
        "form-phone-invalid": "Geçerli bir telefon numarası giriniz",
        "footer-description": "Dörten Yapı Sanayi Turizm Ticaret Ltd. Şti.<br>İnşaat ve yapı sektöründe kalite, güvenilirlik ve mühendislik mükemmelliği ile hizmet vermekteyiz.",
        "footer-contact-title": "İletişim",
        "footer-copyright": "&copy; 2025 Dörten Yapı Sanayi. Tüm hakları saklıdır.",
        "logo-alt": "Dörten Yapı Sanayi Logo",
        "meta-description": "Dörten Yapı - İnşaat, yapı ve müteahhitlik hizmetleri. Ankara'da profesyonel ve güvenilir yapı çözümleri.",
        "meta-keywords": "4n Yapı, Dörten Yapı, inşaat, müteahhit, yapı, Ankara, inşaat firması, müteahhitlik",
        "loading-text": "Yükleniyor..."
    },
    en: {
        "hero-title": "PERFECT QUALITY<br>PERFECT TRUST",
        "hero-intro": "As 4N Yapı, we bring together quality, engineering and aesthetics in residential, commercial and industrial structures. With our Ankara-based company, we build safe and modern living spaces and take firm steps towards the future.",
        "nav-kurumsal": "Corporate",
        "nav-projeler": "Projects",
        "nav-iletisim": "Contact",
        "mobile-menu-toggle": "Toggle menu",
        "section-kurumsal": "Corporate",
        "section-projeler": "Projects",
        "section-iletisim": "Contact",
        "about-text": "4N Yapı (Dörten Yapı Sanayi Turizm Ticaret Ltd. Şti.) operates with an understanding based on reliability, quality and engineering power in the construction sector. Our Ankara-based company provides design and implementation services in many areas, especially housing, commercial areas, industrial facilities and steel/reinforced concrete structures. With our experienced technical team and solution-oriented approach, maximum efficiency and satisfaction are targeted at every stage of the projects.",
        "vision-title": "Vision",
        "vision-text": "Our goal is to become one of the first names that come to mind in our field by always signing good works and ensuring the continuous improvement of quality in the sector. In addition, the employment we will provide with continuous growth will contribute to the country's economy.",
        "mission-title": "Mission",
        "mission-text": "Being an example in the sector with our reliability, quality understanding and professional approach, reflecting the same care to every project is our main duty. Our aim is to keep success at the highest level at all times by investing in modern technology and expert and trained staff.",
        "projects-intro": "4N Yapı has signed many successful projects since its establishment. With our team specialized in residential, business center and industrial building categories, we design and implement functional, aesthetic and fully compliant structures. Our reference projects are shaped by our solutions that combine engineering precision and user satisfaction.",
        "featured-projects": "Featured Projects",
        "all-projects": "All Projects",
        "residential-projects": "Residential Projects",
        "commercial-projects": "Commercial Projects",
        "industrial-projects": "Industrial Projects",
        "public-projects": "Public Projects",
        "tourism-projects": "Tourism Projects",
        "contact-intro": "Contact us to safely bring your projects to life with 4N Yapı. Our office is located in Çankaya district of Ankara, and you can easily reach us by phone or email. If you wish, you can also send us a message through the form below – we will respond as soon as possible.",
        "contact-address": "Address",
        "contact-phone": "Phone",
        "contact-email": "Email",
        "form-name": "Your Name",
        "form-email": "Your Email",
        "form-phone": "Your Phone Number",
        "form-message": "Your Message",
        "form-submit": "Send",
        "form-name-placeholder": "Your Name *",
        "form-email-placeholder": "Your Email Address *",
        "form-phone-placeholder": "Your Phone Number",
        "form-message-placeholder": "Your Message *",
        "contact-form-title": "Contact Form",
        "map-title": "Office Location",
        "form-sending": "Sending...",
        "form-success": "Your message has been sent successfully! We will get back to you as soon as possible.",
        "form-error": "An error occurred while sending the message. Please try again.",
        "form-required": "This field is required",
        "form-email-invalid": "Please enter a valid email address",
        "form-phone-invalid": "Please enter a valid phone number",
        "footer-description": "Dörten Yapı Sanayi Turizm Ticaret Ltd. Şti.<br>We serve in the construction and building sector with quality, reliability and engineering excellence.",
        "footer-contact-title": "Contact",
        "footer-copyright": "&copy; 2025 Dörten Yapı Sanayi. All rights reserved.",
        "logo-alt": "Dörten Yapı Sanayi Logo",
        "meta-description": "Dörten Yapı - Construction, building and contracting services. Professional and reliable construction solutions in Ankara.",
        "meta-keywords": "4n Yapı, Dörten Yapı, construction, contractor, building, Ankara, construction company, contracting",
        "loading-text": "Loading..."
    }
};

// Enhanced Loading Animation
function showLoading() {
    const loading = document.querySelector('.loading');
    if (loading) {
        loading.classList.remove('hidden');
        loading.style.display = 'flex';
    }
}

function hideLoading() {
    const loading = document.querySelector('.loading');
    if (loading) {
        loading.classList.add('hidden');
        setTimeout(() => {
            loading.style.display = 'none';
        }, 500);
    }
}

// Simple scroll progress (optional)
function updateScrollProgress() {
    const progressBar = document.querySelector('.progress-bar');
    if (progressBar) {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        progressBar.style.width = scrolled + '%';
    }
}

// Simple smooth scrolling
function smoothScrollTo(targetId) {
    const target = document.querySelector(targetId);
    if (target) {
        const targetPosition = target.offsetTop - 80; // Account for fixed header
        window.scrollTo({
            top: targetPosition,
            behavior: 'smooth'
        });
    }
}

// Simple initialization - no complex animations
function initializeSimpleEffects() {
    // Add simple click handlers for navigation
    const navLinks = document.querySelectorAll('a[href^="#"]');
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            smoothScrollTo(targetId);
        });
    });
    
    // Add click handlers for project images to open in new tab and lazy loading
    const projectImages = document.querySelectorAll('.project-image');
    projectImages.forEach(image => {
        image.style.cursor = 'pointer';
        image.addEventListener('click', () => {
            window.open(image.src, '_blank');
        });
        // Add lazy loading for better performance
        if (!image.hasAttribute('loading')) {
            image.setAttribute('loading', 'lazy');
        }
    });
    
    // Add click handlers for language buttons
    const langButtons = document.querySelectorAll('.lang-btn');
    langButtons.forEach(button => {
        button.addEventListener('click', () => {
            const lang = button.dataset.lang;
            changeLanguage(lang);
        });
    });
}

// Simple header scroll effect
function handleScroll() {
    const header = document.querySelector('.header');
    if (header) {
        if (window.scrollY > 50) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
    }
    
    // Update progress bar
    updateScrollProgress();
}

// Enhanced Form Validation and Submission
function initializeContactForm() {
    const form = document.getElementById('contactForm');
    if (!form) return;

    const inputs = form.querySelectorAll('input, textarea');
    
    // Add real-time validation
    inputs.forEach(input => {
        input.addEventListener('blur', validateField);
        input.addEventListener('input', clearErrors);
    });

    function validateField(e) {
        const field = e.target;
        const value = field.value.trim();
        
        // Remove existing error messages
        clearFieldError(field);
        
        // Validation rules
        const currentLang = localStorage.getItem('preferredLanguage') || 'tr';
        
        if (field.hasAttribute('required') && !value) {
            showFieldError(field, translations[currentLang]['form-required']);
            return false;
        }
        
        if (field.type === 'email' && value && !isValidEmail(value)) {
            showFieldError(field, translations[currentLang]['form-email-invalid']);
            return false;
        }
        
        if (field.type === 'tel' && value && !isValidPhone(value)) {
            showFieldError(field, translations[currentLang]['form-phone-invalid']);
            return false;
        }
        
        return true;
    }

    function clearErrors(e) {
        clearFieldError(e.target);
    }

    function showFieldError(field, message) {
        field.classList.add('error');
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error';
        errorDiv.textContent = message;
        errorDiv.style.color = '#dc2626';
        errorDiv.style.fontSize = '0.875rem';
        errorDiv.style.marginTop = '0.25rem';
        field.parentNode.appendChild(errorDiv);
    }

    function clearFieldError(field) {
        field.classList.remove('error');
        const errorDiv = field.parentNode.querySelector('.field-error');
        if (errorDiv) {
            errorDiv.remove();
        }
    }

    function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPhone(phone) {
        return /^[\+]?[0-9\s\-\(\)]{10,}$/.test(phone);
    }

    // Form submission with loading state
    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Validate all fields
        let isValid = true;
        inputs.forEach(input => {
            if (!validateField({ target: input })) {
                isValid = false;
            }
        });

        if (!isValid) return;

        const submitBtn = form.querySelector('.submit-btn');
        const originalText = submitBtn.textContent;
        const currentLang = localStorage.getItem('preferredLanguage') || 'tr';
        
        // Show loading state
        submitBtn.disabled = true;
        submitBtn.textContent = translations[currentLang]['form-sending'];
        submitBtn.style.opacity = '0.7';

        try {
            // Simulate form submission (replace with actual endpoint)
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Success state
            submitBtn.textContent = translations[currentLang]['form-success'];
            submitBtn.style.background = '#10b981';
            
            // Reset form after success
            setTimeout(() => {
                form.reset();
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
                submitBtn.style.opacity = '1';
                submitBtn.style.background = '';
            }, 3000);
            
        } catch (error) {
            // Error state
            submitBtn.textContent = translations[currentLang]['form-error'];
            submitBtn.style.background = '#dc2626';
            
            setTimeout(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
                submitBtn.style.opacity = '1';
                submitBtn.style.background = '';
            }, 3000);
        }
    });
}

// Simple Contact Form Handler
class SimpleContactForm {
    constructor() {
        this.form = document.getElementById('contactForm');
        this.submitBtn = null;
        
        if (this.form) {
            this.submitBtn = this.form.querySelector('.submit-btn');
            this.init();
        }
    }
    
    init() {
        this.form.addEventListener('submit', (e) => this.handleSubmit(e));
        
        // Add real-time validation
        const inputs = this.form.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('blur', (e) => this.validateField(e.target));
            input.addEventListener('input', (e) => this.clearFieldError(e.target));
        });
    }
    
    getCurrentLanguage() {
        const activeBtn = document.querySelector('.lang-btn.active');
        return activeBtn ? activeBtn.dataset.lang : 'tr';
    }
    
    getTranslation(key) {
        const lang = this.getCurrentLanguage();
        return translations[lang] && translations[lang][key] ? translations[lang][key] : key;
    }
    
    validateField(field) {
        const value = field.value.trim();
        
        // Clear previous errors
        this.clearFieldError(field);
        
        // Required field validation
        if (field.hasAttribute('required') && !value) {
            this.showFieldError(field, this.getTranslation('form-required'));
            return false;
        }
        
        // Email validation
        if (field.type === 'email' && value && !this.isValidEmail(value)) {
            this.showFieldError(field, this.getTranslation('form-email-invalid'));
            return false;
        }
        
        // Phone validation
        if (field.type === 'tel' && value && !this.isValidPhone(value)) {
            this.showFieldError(field, this.getTranslation('form-phone-invalid'));
            return false;
        }
        
        return true;
    }
    
    showFieldError(field, message) {
        field.classList.add('error');
        const errorDiv = document.createElement('div');
        errorDiv.className = 'field-error';
        errorDiv.textContent = message;
        errorDiv.style.cssText = `
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: block;
        `;
        field.parentNode.insertBefore(errorDiv, field.nextSibling);
    }
    
    clearFieldError(field) {
        field.classList.remove('error');
        const errorDiv = field.parentNode.querySelector('.field-error');
        if (errorDiv) {
            errorDiv.remove();
        }
    }
    
    async handleSubmit(e) {
        e.preventDefault();
        
        if (!this.validateForm()) {
            return;
        }
        
        this.setLoading(true);
        
        try {
            // Get form data
            const formData = new FormData(this.form);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                message: formData.get('message')
            };
            
            // Simulate form submission - replace with actual endpoint
            await this.submitForm(data);
            
            this.showMessage(this.getTranslation('form-success'), 'success');
            this.form.reset();
            
        } catch (error) {
            this.showMessage(this.getTranslation('form-error'), 'error');
        } finally {
            this.setLoading(false);
        }
    }
    
    async submitForm(data) {
        // Simulate API call - replace with your actual form submission endpoint
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                // Simulate success/failure
                if (Math.random() > 0.1) { // 90% success rate for demo
                    resolve({ success: true });
                } else {
                    reject(new Error('Submission failed'));
                }
            }, 2000);
        });
    }
    
    validateForm() {
        const inputs = this.form.querySelectorAll('input[required], textarea[required]');
        let isValid = true;
        
        inputs.forEach(input => {
            if (!this.validateField(input)) {
                isValid = false;
            }
        });
        
        return isValid;
    }
    
    isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    isValidPhone(phone) {
        const phoneRegex = /^[\+]?[0-9\s\-\(\)]{10,}$/;
        return phoneRegex.test(phone);
    }
    
    setLoading(isLoading) {
        if (!this.submitBtn) return;
        
        const btnText = this.submitBtn.querySelector('span');
        const btnIcon = this.submitBtn.querySelector('i');
        
        if (isLoading) {
            this.submitBtn.disabled = true;
            this.submitBtn.style.opacity = '0.7';
            if (btnIcon) btnIcon.className = 'fas fa-spinner fa-spin';
            if (btnText) btnText.textContent = this.getTranslation('form-sending');
        } else {
            this.submitBtn.disabled = false;
            this.submitBtn.style.opacity = '1';
            if (btnIcon) btnIcon.className = 'fas fa-paper-plane';
            if (btnText) btnText.textContent = this.getTranslation('form-submit');
        }
    }
    
    showMessage(message, type) {
        // Remove existing message
        const existingMessage = this.form.querySelector('.form-message');
        if (existingMessage) {
            existingMessage.remove();
        }
        
        // Create new message
        const messageDiv = document.createElement('div');
        messageDiv.className = `form-message form-message-${type}`;
        messageDiv.textContent = message;
        
        // Add styles
        messageDiv.style.cssText = `
            padding: 12px 16px;
            margin-top: 16px;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
            font-weight: 500;
            ${type === 'success' ? 
                'background: #f0f9ff; color: #0369a1; border: 1px solid #bae6fd;' : 
                'background: #fef2f2; color: #dc2626; border: 1px solid #fecaca;'
            }
        `;
        
        this.form.appendChild(messageDiv);
        
        // Remove message after 5 seconds
        setTimeout(() => {
            if (messageDiv.parentNode) {
                messageDiv.remove();
            }
        }, 5000);
    }
}

// Enhanced Statistics Counter Animation
function animateCounters() {
    const counters = document.querySelectorAll('.stat-number');
    
    counters.forEach(counter => {
        const target = parseInt(counter.textContent.replace(/\D/g, ''));
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            
            const suffix = counter.textContent.replace(/\d/g, '').replace(/\+/g, '');
            counter.textContent = Math.floor(current) + suffix;
        }, 16);
    });
}

// Static sections - no parallax effect
function initializeParallax() {
    // Parallax disabled to prevent section overlapping
    return;
}

// Enhanced Language Switching with Storage
function changeLanguage(lang) {
    console.log('Changing language to:', lang);
    
    // Update active button state
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === lang);
    });
    
    // Update content with data-translate attributes
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        console.log('Translating:', key, 'to', translations[lang] ? translations[lang][key] : 'NOT FOUND');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'META') {
                element.setAttribute('content', translations[lang][key]);
            } else if (element.hasAttribute('aria-label')) {
                element.setAttribute('aria-label', translations[lang][key]);
            } else if (element.hasAttribute('alt')) {
                element.setAttribute('alt', translations[lang][key]);
            } else if (key.includes('title') || key.includes('description') || key.includes('copyright')) {
                element.innerHTML = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update placeholders with data-translate-placeholder attributes
    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
        const key = element.getAttribute('data-translate-placeholder');
        if (translations[lang] && translations[lang][key]) {
            element.setAttribute('placeholder', translations[lang][key]);
        }
    });

    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);
}

// Enhanced Mobile Menu (if needed in future)
function initializeMobileMenu() {
    // Placeholder for mobile menu functionality
    // Will be implemented if mobile hamburger menu is added
}

// Performance Monitoring
function initializePerformanceMonitoring() {
    if ('performance' in window) {
        window.addEventListener('load', () => {
            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
            console.log(`Page loaded in ${loadTime}ms`);
            
            // Log Core Web Vitals if supported
            if ('web-vital' in window) {
                // Implementation for Core Web Vitals monitoring
            }
        });
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Remove loading screen quickly
    const loadingElement = document.querySelector('.loading');
    if (loadingElement) {
        setTimeout(() => {
            loadingElement.style.opacity = '0';
            setTimeout(() => {
                loadingElement.style.display = 'none';
            }, 300);
        }, 200);
    }
    
    // Initialize language from storage or default to Turkish
    const preferredLanguage = localStorage.getItem('preferredLanguage') || 'tr';
    if (preferredLanguage !== 'tr') {
        changeLanguage(preferredLanguage);
    }
    
    // Initialize simple effects
    initializeSimpleEffects();
    
    // Initialize mobile navigation
    const mobileNav = new MobileNavigation();
    
    // Initialize progress indicator
    const progressIndicator = new ProgressIndicator();
    
    // Initialize simple contact form
    new SimpleContactForm();
    
    // Add scroll listener
    window.addEventListener('scroll', handleScroll);
});

// Enhanced Performance Monitoring
class PerformanceMonitor {
    constructor() {
        this.metrics = {
            loadTime: 0,
            firstPaint: 0,
            domContentLoaded: 0,
            scrollEvents: 0
        };
        
        this.trackPerformance();
    }
    
    trackPerformance() {
        // Track load time
        window.addEventListener('load', () => {
            this.metrics.loadTime = performance.now();
            this.reportMetrics();
        });
        
        // Track First Paint
        if ('PerformanceObserver' in window) {
            const observer = new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    if (entry.name === 'first-paint') {
                        this.metrics.firstPaint = entry.startTime;
                    }
                }
            });
            observer.observe({ entryTypes: ['paint'] });
        }
        
        // Track DOM Content Loaded
        document.addEventListener('DOMContentLoaded', () => {
            this.metrics.domContentLoaded = performance.now();
        });
        
        // Throttled scroll tracking
        let scrollCount = 0;
        const throttledScroll = this.throttle(() => {
            scrollCount++;
            this.metrics.scrollEvents = scrollCount;
        }, 100);
        
        window.addEventListener('scroll', throttledScroll);
    }
    
    throttle(func, delay) {
        let timeoutId;
        let lastExecTime = 0;
        return function (...args) {
            const currentTime = Date.now();
            
            if (currentTime - lastExecTime > delay) {
                func.apply(this, args);
                lastExecTime = currentTime;
            } else {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => {
                    func.apply(this, args);
                    lastExecTime = Date.now();
                }, delay - (currentTime - lastExecTime));
            }
        };
    }
    
    reportMetrics() {
        if (process.env.NODE_ENV === 'development') {
            console.log('Performance Metrics:', this.metrics);
        }
    }
}

// Enhanced Mobile Navigation
class MobileNavigation {
    constructor() {
        this.menuToggle = document.getElementById('mobileMenuToggle');
        this.mobileNav = document.getElementById('mobileNav');
        this.mobileOverlay = document.getElementById('mobileOverlay');
        this.mobileLinks = document.querySelectorAll('.mobile-nav-link');
        this.isOpen = false;
        
        this.init();
    }
    
    init() {
        if (!this.menuToggle || !this.mobileNav) return;
        
        this.bindEvents();
    }
    
    bindEvents() {
        // Toggle menu
        this.menuToggle.addEventListener('click', () => {
            this.toggleMenu();
        });
        
        // Close on overlay click
        this.mobileOverlay.addEventListener('click', () => {
            this.closeMenu();
        });
        
        // Close on link click
        this.mobileLinks.forEach(link => {
            link.addEventListener('click', () => {
                this.closeMenu();
            });
        });
        
        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.isOpen) {
                this.closeMenu();
            }
        });
        
        // Handle resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 640 && this.isOpen) {
                this.closeMenu();
            }
        });
    }
    
    toggleMenu() {
        if (this.isOpen) {
            this.closeMenu();
        } else {
            this.openMenu();
        }
    }
    
    openMenu() {
        this.isOpen = true;
        this.menuToggle.classList.add('active');
        this.mobileNav.classList.add('active');
        this.mobileOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Focus management
        this.mobileLinks[0]?.focus();
    }
    
    closeMenu() {
        this.isOpen = false;
        this.menuToggle.classList.remove('active');
        this.mobileNav.classList.remove('active');
        this.mobileOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }
}

// Enhanced Progress Bar
class ProgressIndicator {
    constructor() {
        this.progressBar = document.getElementById('progressBar');
        this.init();
    }
    
    init() {
        if (!this.progressBar) {
            this.createProgressBar();
        }
        
        this.updateProgress();
        window.addEventListener('scroll', () => this.updateProgress());
    }
    
    createProgressBar() {
        const container = document.createElement('div');
        container.className = 'progress-container';
        
        const bar = document.createElement('div');
        bar.className = 'progress-bar';
        bar.id = 'progressBar';
        
        container.appendChild(bar);
        document.body.appendChild(container);
        
        this.progressBar = bar;
    }
    
    updateProgress() {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        
        if (this.progressBar) {
            this.progressBar.style.width = scrolled + '%';
        }
    }
}

//# sourceMappingURL=main.js.map
